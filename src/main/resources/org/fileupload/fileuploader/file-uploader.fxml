<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="org.fileupload.fileuploader.FileUploaderController"
      alignment="TOP_CENTER" spacing="20.0" style="-fx-background-color: #f5f7fa; -fx-padding: 20;">

    <!-- Modern Header with App Title, Logo, and Settings Button -->
    <HBox alignment="CENTER" spacing="15.0" style="-fx-padding: 0 0 10 0;">
        <VBox spacing="0">
            <Label text="FILE UPLOADER" style="-fx-font-weight: bold; -fx-font-size: 14; -fx-text-fill: #4a6baf;"/>
            <Label text="Secure Cloud Backup" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
        </VBox>
        <Region HBox.hgrow="ALWAYS"/>
    </HBox>

    <!-- Modern File Upload Card with Drag & Drop Support -->
    <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 2);"
          alignment="CENTER" spacing="20" maxWidth="600">
<!--        <Label text="Upload Files" style="-fx-font-weight: bold; -fx-font-size: 18; -fx-text-fill: #333;"/>-->

        <!-- Drag & Drop Zone -->
        <VBox fx:id="dropZone" alignment="CENTER" spacing="15"
              style="-fx-border-color: #d1d5db; -fx-padding: 20 10 30 15; -fx-border-style: dashed; -fx-border-radius: 8; -fx-background-color: #f9fafb; -fx-background-radius: 8;"
              onDragOver="#handleDragOver" onDragDropped="#handleDragDropped" onDragExited="#handleDragExited"
              maxWidth="550" >
            <Label text="Drag and Drop files here" style="-fx-font-size: 16; -fx-text-fill: #6b7280;"/>
            <Label text="or" style="-fx-font-size: 14; -fx-text-fill: #9ca3af;"/>
            <Button text="Browse Files" onAction="#handleChooseFileButton"
                    style="-fx-background-color: #4a6baf; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20; -fx-background-radius: 6;"/>
            <Label fx:id="dropZoneSuccess" style="-fx-font-weight: bold; -fx-text-fill: #4a6baf;"/>
        </VBox>

        <!-- Selected Files List -->
        <ListView fx:id="selectedFilesList" visible="false"
                  style="-fx-background-color: #f3f4f6; -fx-background-radius: 8;"
                  maxWidth="550" maxHeight="100"
                  styleClass="files-list-view"/>

        <!-- Action Buttons -->
        <HBox alignment="CENTER" spacing="15">
            <Button text="Upload All Files" onAction="#handleUploadButton"
                    style="-fx-background-color: linear-gradient(to right, #4a6baf, #3b5998); -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 25; -fx-background-radius: 6; -fx-effect: dropshadow(three-pass-box, rgba(74,107,175,0.3), 5, 0, 0, 2);"/>
            <Button fx:id="backupNowButtonid" text="Backup Now" onAction="#startManualBackup"
                    style="-fx-background-color: linear-gradient(to right, #2e7d32, #1b5e20); -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 25; -fx-background-radius: 6; -fx-effect: dropshadow(three-pass-box, rgba(46,125,50,0.3), 5, 0, 0, 2);"/>
        </HBox>

        <!-- Status Indicators -->
        <VBox alignment="CENTER" spacing="10">
            <HBox alignment="CENTER" spacing="10">
                <Label text="Last Backup:" style="-fx-font-weight: bold; -fx-text-fill: #4b5563;"/>
                <Label fx:id="lastBackupLabel" text="Never" style="-fx-text-fill: #6b7280;"/>
            </HBox>

            <VBox fx:id="backupProgressBox" visible="false" spacing="8" alignment="CENTER" style="-fx-padding: 10 0;">
                <ProgressBar fx:id="backupProgress" maxWidth="400" style="-fx-accent: #4a6baf; -fx-background-radius: 3; -fx-border-radius: 3;"/>
                <Label fx:id="backupStatusLabel" style="-fx-text-fill: #4b5563; -fx-font-size: 13;"/>
            </VBox>

            <VBox fx:id="uploadProgressBox" visible="false" spacing="8" alignment="CENTER" style="-fx-padding: 10 0;">
                <ProgressBar fx:id="uploadProgress" maxWidth="400" style="-fx-accent: #4a6baf; -fx-background-radius: 3; -fx-border-radius: 3;"/>
                <Label fx:id="progressLabel" text="Uploading..." style="-fx-text-fill: #4a6baf; -fx-font-weight: bold;"/>
            </VBox>

            <Label fx:id="statusLabel" style="-fx-font-weight: bold; -fx-text-fill: #d32f2f;"/>
        </VBox>
    </VBox>

    <!-- Recently Backed Up/Uploaded Files Section -->
    <TableView fx:id="filesTable" maxHeight="200" style="-fx-background-insets: 0;">
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
        <columns>
            <TableColumn text="File Name" prefWidth="150">
                <cellValueFactory><PropertyValueFactory property="name"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Size" prefWidth="80">
                <cellValueFactory><PropertyValueFactory property="size"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Date" prefWidth="120">
                <cellValueFactory><PropertyValueFactory property="date"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Type" prefWidth="80">
                <cellValueFactory><PropertyValueFactory property="type"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Status" prefWidth="70">
                <cellValueFactory><PropertyValueFactory property="status"/></cellValueFactory>
            </TableColumn>
        </columns>
    </TableView>

</VBox>